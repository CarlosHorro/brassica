- mode ||= :public
%ul.submissions
  - submissions.each do |submission|
    %li

      .main-info
        %div
          = submission_type(submission)
          - if mode == :public
            = submission_public_link(submission)
          - else
            = submission_private_link(submission)
        %div
          = submission_details(submission)

      - unless submission.finalized?
        = render partial: "/submissions/show/status", locals: { submission: submission }

        - unless mode == :public
          = confirmable_action("Delete", submission, method: :delete, btn_class: "btn-warning") do
            = link_to 'Edit', edit_submission_path(submission), class: 'btn btn-sm btn-default'

      - else
        = render partial: "/submissions/show/status", locals: { submission: submission }

        - if mode == :public
          .actions
            = link_to 'Details',
              submission_details_path(submission),
              class: 'btn btn-sm btn-default'

        - else
          - if submission.publishable? && submission.revocable?
            = confirmable_action("Revoke publication", submission,
                url: revoke_submission_path(submission), method: :patch)

          - else
            = confirmable_action("Publish", submission,
                url: publish_submission_path(submission), method: :patch, btn_class: "btn-primary")
